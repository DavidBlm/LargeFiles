package ba.intersection;

import ba.util.RelToAbsTrajectory;

component IntersectionController{
    port in Q^{3,5} relTrajIn[2];
    port in Q^{2,1} absPosIn[2];

    port in Q cutoffPosIn;
    port in Q cutoffTimeIn;

    port out B stopOut[2];

    instance RelToAbsTrajectory<2,5> relToAbsTrajectory;
    instance TrajectoryToStop<2,1,5> trajectoryToStop;

    connect cutoffPosIn -> trajectoryToStop.cutoffPos;
    connect cutoffTimeIn -> trajectoryToStop.cutoffTime;

    connect relTrajIn[:] -> relToAbsTrajectory.relTrajectoryIn[:];
    connect absPosIn[:] -> relToAbsTrajectory.absPositionIn[:];
    connect relToAbsTrajectory.absTrajectoryOut[:] -> trajectoryToStop.trajectoryIn[:];

    connect trajectoryToStop.stop[:] -> stopOut[:];

}