package ba.intersection;
import ba.util.LineIntersection;
import ba.util.TrajectoryToLine;

//TODO: x = (n-1)n/2
component ConflictComputer<N1 n = 2,N1 x = 1,N1 m = 5>{
    port in Q^{3,m} trajectory[n];
    port in Q cutoffTimeIn;
    port out B conflictOut[x];

    instance TrajectoryCompare trajectoryCompare;
    instance CollisionToConflict collisionToConflict;

    connect trajectory[1] -> trajectoryCompare.trajectory[1];
    connect trajectory[2] -> trajectoryCompare.trajectory[2];

    connect trajectory[1] -> collisionToConflict.trajectoryIn1;
    connect trajectory[2] -> collisionToConflict.trajectoryIn2;
    connect cutoffTimeIn -> collisionToConflict.timeCutoff;

    connect trajectoryCompare.collision -> collisionToConflict.collisionIn;
    connect trajectoryCompare.index1 -> collisionToConflict.indexIn1;
    connect trajectoryCompare.index2 -> collisionToConflict.indexIn2;
    connect trajectoryCompare.colPos -> collisionToConflict.colPosIn;

    connect collisionToConflict.conflict -> conflictOut[1];
}
