package ba.vehicle;
import ba.util.Position;

//component Planner<N1 k = 10,N1 m = 20>{
component Planner{
    ports in Q^{4,10} lanelet,
          in Position position,
          in Q maxVelocity,
          in Q maxAcceleration,
          in Q deltaTime,
          in Q planningTime,
          in B slowDown,
          in B resetVelocity;

    ports out Q^{3,20} desiredTrajectory;

    instance LaneletToWay<10,20> laneletToWay;
    instance VelocityController velocityController;
    instance TrajectoryComputer<10,20> trajectoryComputer;

    connect lanelet -> laneletToWay.laneletIn;

    connect maxVelocity -> velocityController.maxVelIn;
    connect maxAcceleration -> velocityController.maxAccelIn;
    connect deltaTime -> velocityController.deltaTimeIn;
    connect slowDown -> velocityController.slowDownIn;
    connect resetVelocity -> velocityController.resetVelIn;

    connect laneletToWay.wayOut -> trajectoryComputer.wayIn;

    connect velocityController.curVelOut -> trajectoryComputer.curVelIn;

    connect planningTime -> trajectoryComputer.planningTimeIn;
    connect position -> trajectoryComputer.posIn;
    connect trajectoryComputer.trajOut -> desiredTrajectory;
}